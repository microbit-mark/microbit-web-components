const t=window.microbit.h;function e(t,e){for(var n,i,c=null,a=!1,u=!1,s=arguments.length;s-- >2;)r.push(arguments[s]);for(;r.length>0;){var f=r.pop();if(f&&void 0!==f.pop)for(s=f.length;s--;)r.push(f[s]);else"boolean"==typeof f&&(f=null),(u="function"!=typeof t)&&(null==f?f="":"number"==typeof f?f=String(f):"string"!=typeof f&&(u=!1)),u&&a?c[c.length-1].vtext+=f:null===c?c=[u?{vtext:f}:f]:c.push(u?{vtext:f}:f),a=u}if(null!=e){if(e.className&&(e.class=e.className),"object"==typeof e.class){for(s in e.class)e.class[s]&&r.push(s);e.class=r.join(" "),r.length=0}null!=e.key&&(n=e.key),null!=e.name&&(i=e.name)}return"function"==typeof t?t(e,c||[],o):{vtag:t,vchildren:c,vtext:void 0,vattrs:e,vkey:n,vname:i,f:void 0,c:!1}}function n(t){return{vtag:t.vtag,vchildren:t.vchildren,vtext:t.vtext,vattrs:t.vattrs,vkey:t.vkey,vname:t.vname}}Object.setPrototypeOf||Array;var r=[],o={forEach:function(t,e){t.forEach(function(t,r,o){return e(n(t),r,o)})},map:function(t,e){return t.map(function(t,r,o){return function(t){return{vtag:t.vtag,vchildren:t.vchildren,vtext:t.vtext,vattrs:t.vattrs,vkey:t.vkey,vname:t.vname}}(e(n(t),r,o))})}};function i(t,n){return e("context-consumer",{subscribe:t,renderer:n})}var c=function(t,n){void 0===n&&(n=i);var r=new Map,o={device:void 0,services:void 0,deviceInformation:void 0};function c(t,e){Array.isArray(t)?t.slice().forEach(function(t){e[t]=o[t]}):e[t]=Object.assign({},o),e.forceUpdate()}function a(t){return function(e){r.has(e)||(r.set(e,t),c(t,e))}}function u(t,e){return a(e)(t),function(){r.delete(t)}}return{Provider:function(t,e){return o=t.state,r.forEach(c),e},Consumer:function(t,e){return n(u,e[0])},wrapConsumer:function(t,n){var r=t.is;return function(t){var o=t.children,i=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&(n[r[o]]=t[r[o]])}return n}(t,["children"]);return e(r,Object.assign({ref:a(n)},i),o)}},injectProps:function(t,e){var n=null,r=Object.keys(t.properties).find(function(e){return 1==t.properties[e].elementRef});if(null==r)throw new Error("Please ensure that your Component "+t.is+' has an attribtue with "@Element" decorator. This is required to be able to inject properties.');var o=t.prototype.componentWillLoad;t.prototype.componentWillLoad=function(){if(n=u(this[r],e),o)return o.bind(this)()};var i=t.prototype.componentDidUnload;t.prototype.componentDidUnload=function(){if(n(),i)return i.bind(this)()}}}}(0,(e,n)=>t("context-consumer",{subscribe:e,renderer:n}));export{c as a};